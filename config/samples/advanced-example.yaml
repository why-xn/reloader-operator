apiVersion: reloader.stakater.com/v1alpha1
kind: ReloaderConfig
metadata:
  name: advanced-example
  namespace: staging
spec:
  # Watch specific resources with label selectors
  watchedResources:
    secrets:
      - database-credentials
      - tls-certificates
    configMaps:
      - app-configuration
    # Filter resources by labels
    resourceSelector:
      matchLabels:
        managed-by: reloader
        environment: staging

  # Multiple targets with different configurations
  targets:
    # Web application with 5-minute pause to prevent cascading restarts
    - kind: Deployment
      name: web-server
      reloadStrategy: annotations
      pausePeriod: 5m

    # Worker pods using env-vars strategy
    - kind: Deployment
      name: background-worker
      reloadStrategy: env-vars
      pausePeriod: 2m

    # StatefulSet in different namespace
    - kind: StatefulSet
      name: redis
      namespace: cache
      pausePeriod: 10m

    # DaemonSet
    - kind: DaemonSet
      name: log-collector

    # Argo Rollout support
    - kind: Rollout
      name: canary-deployment
      reloadStrategy: annotations

  # Ignore specific resources even if they match watch criteria
  ignoreResources:
    - kind: Secret
      name: internal-cert
    - kind: ConfigMap
      name: system-config
      namespace: kube-system

  # Match only resources with specific labels
  matchLabels:
    reloader-enabled: "true"
    team: platform

  # Global settings
  reloadStrategy: env-vars
  reloadOnCreate: true
  reloadOnDelete: false

  # Comprehensive alerting
  alerts:
    slack:
      secretRef:
        name: slack-webhook
        key: webhook-url
    googleChat:
      secretRef:
        name: gchat-webhook
    customWebhook:
      url: https://custom-alerting-service.example.com/webhook
