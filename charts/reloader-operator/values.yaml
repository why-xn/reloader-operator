# Default values for reloader-operator
# This is a YAML-formatted file.

# ============================================================================
# Controller Manager Configuration
# ============================================================================
controllerManager:
  # Number of controller manager replicas
  replicas: 1

  manager:
    # Container image configuration
    image:
      # Image repository
      repository: stakater/reloader-operator
      # Image tag (overrides the appVersion from Chart.yaml)
      tag: v2.0.0
      # Image pull policy
      pullPolicy: IfNotPresent

    # Operator command-line arguments
    args:
      # Metrics server bind address (use :8443 for HTTPS, :8080 for HTTP, or 0 to disable)
      - --metrics-bind-address=:8443
      # Enable leader election for high availability
      - --leader-elect
      # Health probe bind address
      - --health-probe-bind-address=:8081
      # Reload workloads when watched resources are created
      - --reload-on-create=false
      # Reload workloads when watched resources are deleted
      - --reload-on-delete=false
      # Default rollout strategy: "rollout" (modify template) or "restart" (delete pods)
      - --rollout-strategy=rollout
      # Default reload strategy: "env-vars" or "annotations" (when rollout-strategy=rollout)
      - --reload-strategy=env-vars
      # Enable alerts on reload (requires alert-webhook-url)
      # - --alert-on-reload=true
      # Alert sink type: slack, teams, gchat, or webhook
      # - --alert-sink=webhook
      # Webhook URL for alerts
      # - --alert-webhook-url=https://your-webhook-url
      # Additional info to include in alerts
      # - --alert-additional-info=Cluster: production
      # Label selector for resources (e.g., "app=myapp,env=prod")
      # - --resource-label-selector=
      # Namespace label selector (e.g., "environment=production")
      # - --namespace-selector=
      # Comma-separated list of namespaces to ignore
      # - --namespaces-to-ignore=kube-system,kube-public

    # Container security context
    containerSecurityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
          - ALL
      readOnlyRootFilesystem: true
      runAsNonRoot: true
      runAsUser: 65532
      seccompProfile:
        type: RuntimeDefault

    # Resource limits and requests
    resources:
      limits:
        cpu: 500m
        memory: 128Mi
      requests:
        cpu: 10m
        memory: 64Mi

    # Environment variables
    env: []
    # - name: LOG_LEVEL
    #   value: debug

    # Volume mounts
    volumeMounts: []

  # Pod security context
  podSecurityContext:
    runAsNonRoot: true
    runAsUser: 65532
    fsGroup: 65532
    seccompProfile:
      type: RuntimeDefault

  # Pod annotations
  podAnnotations: {}

  # Pod labels
  podLabels: {}

  # Node selector
  nodeSelector: {}

  # Tolerations
  tolerations: []

  # Affinity
  affinity: {}

  # Topology spread constraints
  topologySpreadConstraints: []

  # Priority class name
  priorityClassName: ""

  # Volumes
  volumes: []

# ============================================================================
# Service Account Configuration
# ============================================================================
serviceAccount:
  # Create a service account
  create: true
  # Service account annotations
  annotations: {}
  # Automatically mount service account token
  automount: true
  # Service account name (generated if not set)
  name: ""

# ============================================================================
# RBAC Configuration
# ============================================================================
rbac:
  # Create RBAC resources (ClusterRole, ClusterRoleBinding)
  create: true
  # RBAC annotations
  annotations: {}

# ============================================================================
# Metrics Service Configuration
# ============================================================================
metricsService:
  # Service type
  type: ClusterIP
  # Service ports
  ports:
    - name: https
      port: 8443
      protocol: TCP
      targetPort: 8443
  # Service annotations
  annotations: {}
  # Service labels
  labels: {}

# ============================================================================
# Metrics Server TLS Certificates
# ============================================================================
# If you want to provide your own TLS certificates for the metrics server,
# uncomment and configure the following:
# metricsCerts:
#   # Path to the directory containing certificates
#   path: /tmp/k8s-metrics-server/metrics-certs
#   # Certificate file name
#   certName: tls.crt
#   # Key file name
#   keyName: tls.key

# ============================================================================
# Webhook Server TLS Certificates
# ============================================================================
# If you want to provide your own TLS certificates for the webhook server,
# uncomment and configure the following:
# webhookCerts:
#   # Path to the directory containing certificates
#   path: /tmp/k8s-webhook-server/serving-certs
#   # Certificate file name
#   certName: tls.crt
#   # Key file name
#   keyName: tls.key

# ============================================================================
# Security Settings
# ============================================================================
# Enable HTTPS for metrics endpoint
secureMetrics: true

# Enable HTTP/2
enableHTTP2: false

# ============================================================================
# Kubernetes Cluster Configuration
# ============================================================================
# Kubernetes cluster domain
kubernetesClusterDomain: cluster.local

# ============================================================================
# Global Settings
# ============================================================================
# Image pull secrets for private registries
imagePullSecrets: []
# - name: my-registry-secret

# Name override
nameOverride: ""

# Full name override
fullnameOverride: ""

# Additional labels to apply to all resources
commonLabels: {}

# Additional annotations to apply to all resources
commonAnnotations: {}
